<div class="header">
  <ul class="nav nav-pills pull-right" ng-controller="MainCtrl">
    <li>Neuer Stoff</li>
    <li class="active"><a ng-click="submit(cloth)">Add</a></li>
  </ul>
  <h3 class="text-muted">Stoff Liste - Neuen Stoff anlegen:</h3>
</div>


<accordion close-others="true">
  <accordion-group heading="Neuer Stoff" is-open="$scope.newSopen" >
      <accordion-heading ng-click="toggleSOpen()">
        Neuer Stoff
        <i class="pull-right glyphicon"
           ng-class="{'glyphicon-chevron-down': $scope.newSopen,
                      'glyphicon-chevron-right': !$scope.newSopen}"></i>
      </accordion-heading>
      <div ng-controller="AddCtrl">
        <div style="background: #FFF">
          <button class="btn btn-default pull-right glyphicon glyphicon-ok" style="cursor:pointer" ng-click="submit(cloth)"></button>
          <form name="in" role="form" class="form-horizontal">
            <h1>Stoff</h1>
            <input type="text" name="id" placeholder="{{ nextId }}" ng-model="cloth.id" class="form-control">
            <h1>Metrage:</h1>
            <table class="table table-striped">
              <tr ng-repeat="metrage in cloth.metrage | filter : search"  ng-class="{'muted':isTemp($index)}">
                <td>{{metrage.width}}</td>
                <td>{{metrage.length}}</td>
                <td>
                  <button class="btn btn-danger btn-mini" ng-click="delMetrage(metrage)" ng-hide="isTemp($index)">
                    <i class="btn-small btn-alert glyphicon glyphicon-trash"></i>
                  </button>
                </td>
              </tr>
              <tr ng-class="{'input-append':addMetrage};">
                <td><input type="text" name="width"  ng-model="additionalMetrage.width" class="form-control"></td>
                <td><input type="text" name="length"  ng-model="additionalMetrage.length" class="form-control" ng-change="addTemp()"></td>
                <td>
                  <button class="btn btn-primary btn-mini" ng-click="addMetrage(metrage)" ng-show="additionalMetrage.length">
                    <i class="btn-small btn-ok glyphicon glyphicon-ok"></i>
                  </button>
                  <!-- <input type="submit" class="btn btn-mini btn-primary" ng-click="addMetrage()" ng-show="additionalMetrage.length" value="+ add"/> -->
                </td>
              </tr>
            </table>    
            <span ng-class="{'input-append':addMetrage};">
              <input type="text" name="width"  ng-model="additionalMetrage.width" class="form-control"> 
              <input type="text" name="length"  ng-model="additionalMetrage.length" class="form-control" ng-change="addTemp()">
              <input type="submit" class="btn btn-primary" ng-click="addMetrage()" ng-show="additionalMetrage.length" value="+ add"/>
            </span>
            <h1>Metainfos:</h1>
            <input type="text" name="color" ng-model="cloth.color" class="form-control">
            <input type="text" name="ingredients" ng-model="cloth.ingredients" class="form-control">
          </form>
        </div>
      </div>
  </accordion-group>
</accordion>




<accordion close-others="true">
  <accordion-group ng-repeat="cloth in cloths track by $index" heading="{{ cloth.id }}" is-open="$scope.isopen">
    <accordion-heading ng-click="toggleOpen()">
      {{ cloth.id }} : {{ cloth.color }}, {{ cloth.ingredients }}
      <i class="pull-right glyphicon"  ng-click="toggleOpen()"
         ng-class="{'glyphicon-chevron-down': $scope.isopen,
                   'glyphicon-chevron-right': !$scope.isopen}"></i>
    </accordion-heading>
    <section  ng-controller="MainCtrl">
      <button class="btn btn-default pull-right glyphicon glyphicon-remove" style="cursor:pointer" ng-click="remove(cloth.id)"></button>
      <button class="btn btn-default pull-right glyphicon glyphicon-ok" style="cursor:pointer" ng-click="update(cloth)"></button>
      <form name="metaForm" role="form" class="form-horizontal">
        <h1>Stoff</h1>
        <input type="text" name="id" ng-model="cloth.id" placeholder="{{ cloth.id }}" class="form-control">
        <h1>Metrage:</h1>
        <table class="table table-striped">
          <tr ng-repeat="metrage in cloth.metrage"  ng-class="{'muted':isTemp($index)}">
            <td>{{metrage.width}}</td>
            <td>{{metrage.length}}</td>
            <td>
              <button class="btn btn-danger btn-mini" ng-click="delMetrage(metrage)" ng-hide="isTemp($index)">
                <i class="btn-small btn-alert glyphicon glyphicon-trash"></i>
              </button>
            </td>
          </tr>
          <tr ng-class="{'input-append':addMetrage};">
            <td><input type="text" name="width"  ng-model="additionalMetrage.width" class="form-control"></td>
            <td><input type="text" name="length"  ng-model="additionalMetrage.length" class="form-control" ng-change="addTemp()"></td>
            <td>
              <button class="btn btn-primary btn-mini" ng-click="addMetrage(metrage)" ng-show="additionalMetrage.length">
                <i class="btn-small btn-ok glyphicon glyphicon-ok"></i>
              </button>
              <!-- <input type="submit" class="btn btn-mini btn-primary" ng-click="addMetrage()" ng-show="additionalMetrage.length" value="+ add"/> -->
            </td>
          </tr>
        </table>    
        <h1>Metainfos:</h1>
        <input type="text" name="color" ng-model="cloth.color" placeholder="{{ cloth.color }}" class="form-control">
        <input type="text" name="ingredients" ng-model="cloth.ingredients" placeholder="{{ cloth.ingredients }}" class="form-control">
      </form>
    </section>
  </accordion-group>
</accordion>

<div class="footer">
  <p><span class="glyphicon glyphicon-heart"></span> from frosch03</p>
</div>
